# General GQL Types
type Query {
  sphere(id: ID!): Sphere!
  spheres: SphereConnection!
  orbit(id: ID!): Orbit!
  orbits(sphereEntryHashB64: String): OrbitConnection!
  me: AgentProfile!
}

type Mutation {
  createSphere(sphere: SphereCreateUpdateParams): SphereCreateResponse!
  updateSphere(sphere: SphereCreateUpdateParams): Sphere!
  createOrbit(orbit: OrbitCreateUpdateParams): OrbitCreateResponse!
  updateOrbit(orbit: OrbitCreateUpdateParams): Orbit!
  createProfile(profile: UserProfileCreateUpdateParams): AgentProfile!
  updateProfile(profile: UserProfileCreateUpdateParams): AgentProfile!
}

scalar DateTime

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String!
  endCursor: String!
}
interface Node {
  id: ID!
}

# Holochain Specific Types
type ResponsePayload {
  actionHash: String!
  entryHash: String!
}

# ---- Profiles ----- #
# Profiles GQL Types

# Profiles Types
type AgentProfile {
  agentPubKey: String!
  profile: Profile!
}

type Profile {
  nickname: String!
  fields: ProfileFields
}

type ProfileFields {
  location: String
  isPublic: String
  avatar: String
}

# Profile Input/Output
input UserProfileCreateUpdateParams {
  nickname: String!
  location: String
  isPublic: String
  avatar: String
}

# ---- Sphere ----- #
# Sphere GQL Types
type SphereConnection {
  edges: [SphereEdge!]!
  pageInfo: PageInfo!
}

type SphereEdge {
  cursor: String!
  node: Sphere!
}

# Sphere Types
type Sphere implements Node {
  id: ID!
  name: String!
  metadata: SphereMetaData
}

type SphereMetaData {
  description: String!
  hashtag: String
}

# Sphere Input/Outputs
input SphereCreateUpdateParams {
  name: String!
  description: String!
  hashtag: String
}

type SphereCreateResponse {
  payload: ResponsePayload!
}

# ---- Orbit ----- #
# Orbit GQL Types
type OrbitConnection {
  edges: [OrbitEdge!]!
  pageInfo: PageInfo!
}

type OrbitEdge {
  cursor: String!
  node: Orbit!
}

# Orbit Types
type Orbit implements Node {
  id: ID!
  name: String!
  timeframe: TimeFrame!
  sphereEntryHashB64: String!
  metadata: OrbitMetaData
}
type TimeFrame {
  startTime: DateTime!
  endTime: DateTime!
}

# Frequency Enum
enum Frequency {
  DAY
  HOUR
  WEEK
}

# Scale Enum
enum Scale {
  SUB
  ATOM
  ASTRO
}

type OrbitMetaData {
  description: String!
  frequency: Frequency!
  scale: Scale!
}

# Orbit Input/Outputs
input OrbitCreateUpdateParams {
  name: String!
  startTime: DateTime!
  endTime: DateTime!
  description: String!
  frequency: Frequency!
  scale: Scale!
  sphereEntryHashB64: String!
}

type OrbitCreateResponse {
  payload: ResponsePayload!
}
